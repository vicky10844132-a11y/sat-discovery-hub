<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Satellite Discovery Index</title>

  <link href="https://cesium.com/downloads/cesiumjs/releases/1.118/Build/Cesium/Widgets/widgets.css" rel="stylesheet" />
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.118/Build/Cesium/Cesium.js"></script>

  <script src="https://unpkg.com/shpjs@latest/dist/shp.min.js"></script>

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <div class="title">Satellite Discovery Index</div>
        <div class="subtitle">AOI + time â†’ archive footprints (public/open catalogs only). No data hosting.</div>
      </div>
    </div>
    <nav class="nav">
      <a class="navlink" href="compliance.html" target="_blank" rel="noopener">Compliance</a>
      <a class="navlink" href="#sources">Sources</a>
    </nav>
  </header>

  <main class="layout">
    <section class="panel">

      <div class="card">
        <h2>1) Set AOI</h2>

        <div class="row">
          <div class="field">
            <label>Search place</label>
            <div class="inline">
              <input id="placeInput" type="text" placeholder="e.g., Burj Al Arab, Dubai" />
              <button id="placeBtn" class="btn">Go</button>
            </div>
            <div class="hint">Public geocoding (OpenStreetMap Nominatim). Optional.</div>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Coordinates</label>
            <div class="inline">
              <input id="latInput" type="number" step="0.000001" placeholder="lat" />
              <input id="lonInput" type="number" step="0.000001" placeholder="lon" />
              <button id="coordBtn" class="btn">Fly</button>
            </div>
            <div class="hint">Tip: you must still draw/upload an AOI polygon/rectangle for coverage.</div>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Upload AOI (GeoJSON / KML / SHP)</label>
            <input id="fileInput" type="file" accept=".geojson,.json,.kml,.zip" />
            <div class="hint">SHP must be a .zip containing .shp/.dbf/.shx (.prj optional).</div>
          </div>
        </div>

        <div class="row">
          <div class="inline">
            <button id="drawRectBtn" class="btn btn-secondary">Draw rectangle</button>
            <button id="clearAoiBtn" class="btn btn-ghost">Clear AOI</button>
          </div>
        </div>

        <div class="aoiBox">
          <div class="aoiTitle">Current AOI</div>
          <div id="aoiSummary" class="aoiSummary">None</div>
        </div>
      </div>

      <div class="card">
        <h2>2) Archive Coverage (Footprints)</h2>

        <div class="row">
          <div class="field">
            <label>Time range (year-month)</label>
            <div class="inline">
              <input id="startMonth" type="month" />
              <input id="endMonth" type="month" />
            </div>
            <div class="hint">
              Shows footprints only (public/open STAC). No imagery download. No vendor inventory APIs.
            </div>
          </div>
        </div>

        <div class="row">
          <div class="inline">
            <button id="coverageBtn" class="btn btn-primary">Show archive coverage</button>
            <button id="clearCoverageBtn" class="btn btn-ghost">Clear coverage</button>
          </div>
        </div>

        <div class="row">
          <div id="coverageStatus" class="hint"></div>
        </div>

        <div class="row">
          <div id="coverageSummary" class="sources"></div>
        </div>

        <div class="row">
          <div class="hint">
            Legend:
            <span class="tag" style="border-color:rgba(90,167,255,.5)">Sentinel-2</span>
            <span class="tag" style="border-color:rgba(34,197,94,.45)">Sentinel-1</span>
            <span class="tag" style="border-color:rgba(245,158,11,.45)">Landsat</span>
          </div>
        </div>
      </div>

      <div class="card" id="sources">
        <h2>3) Sources (Portals)</h2>
        <div id="sourcesList" class="sources"></div>
      </div>

      <footer class="footer">
        <div class="footerLine">
          <b>Compliance:</b> Aggregates public portals and public/open catalogs. No data hosting. No scraping. No vendor inventory APIs.
        </div>
      </footer>

    </section>

    <section class="mapWrap">
      <div id="cesiumContainer"></div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
