<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OPEN RS HUB // Command Center</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        /* --- 1. CORE VARIABLES (SCI-FI BLUE THEME) --- */
        :root {
            --bg: #0b1016;                      /* Á®çÂæÆÊèê‰∫Æ‰∏ÄÁÇπÁöÑÊ∑±Ëâ≤ËÉåÊôØ */
            --panel: rgba(11, 19, 30, 0.95);    /* Ê∑±ËìùÈù¢Êùø */
            --border: #00e5ff;                  /* ËçßÂÖâÈùí */
            --accent: #00e5ff;                  
            --accent-glow: rgba(0, 229, 255, 0.4); 
            --text: #e0f7ff;                    
            --text-mute: #6b8caf;               
            --font-mono: 'SF Mono', 'Consolas', monospace;
            --cursor-default: auto;
            --cursor-pointer: pointer;
        }

        body { 
            margin: 0; background: var(--bg); color: var(--text); 
            font-family: "Segoe UI", Roboto, sans-serif; 
            height: 100vh; overflow: hidden; 
            cursor: var(--cursor-default); 
        }

        /* Âº∫Âà∂Ëá™ÂÆö‰πâÂÖâÊ†á */
        button, a, .toggle, .ai-avatar-btn, .entry-card, .portal-item, .close-btn {
            cursor: var(--cursor-pointer) !important;
        }

        /* --- 2. ENTRY OVERLAY (Â≠ó‰ΩìË∞É‰ºòÁâà) --- */
        #entryOverlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(8, 12, 18, 0.98);
            z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.6s ease;
            backdrop-filter: blur(15px);
        }
        
        /* ‰øÆÊ≠£ÔºöÂ≠ó‰ΩìË∞ÉÂ∞èÔºåÊõ¥Á≤æËá¥ */
        .entry-title { 
            font-size: 24px; font-weight: 800; letter-spacing: 4px; color: var(--accent); 
            margin-bottom: 5px; text-shadow: 0 0 10px var(--accent-glow);
        }
        .entry-sub { 
            font-family: var(--font-mono); font-size: 11px; color: var(--text-mute); 
            margin-bottom: 30px; letter-spacing: 2px;
        }
        
        .legal-box {
            max-width: 550px;
            font-size: 10px; color: var(--text-mute); line-height: 1.5;
            margin-bottom: 30px; padding: 15px;
            background: rgba(0, 229, 255, 0.03);
            border: 1px solid rgba(0, 229, 255, 0.2);
            border-left: 2px solid var(--accent);
            font-family: var(--font-mono);
        }

        .cursor-selection-grid { 
            display: grid; grid-template-columns: repeat(6, 1fr); gap: 12px; 
            max-width: 700px;
        }
        .entry-card {
            width: 80px; height: 90px; /* Â∞∫ÂØ∏Ë∞ÉÂ∞è */
            background: rgba(16, 27, 45, 0.6);
            border: 1px solid rgba(0, 229, 255, 0.15);
            border-radius: 8px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 0.2s;
        }
        .entry-card:hover { 
            transform: translateY(-3px); 
            border-color: var(--accent); 
            background: rgba(0, 229, 255, 0.1);
            box-shadow: 0 0 15px var(--accent-glow); 
        }
        .entry-icon { font-size: 28px; margin-bottom: 8px; filter: drop-shadow(0 0 2px var(--accent)); }
        /* ‰øÆÊ≠£ÔºöÊòüÂ∫ßÊñáÂ≠óÊûÅÂ∞èÂåñ */
        .entry-label { font-size: 9px; font-weight: 600; color: var(--text-mute); text-transform: uppercase; letter-spacing: 0.5px; }
        .entry-card:hover .entry-label { color: var(--accent); }

        /* --- 3. MAP (VISUAL FIX - ‰∫ÆÂ∫¶ÊÅ¢Â§ç) --- */
        #map { 
            width: 100vw; height: 100vh; z-index: 1; 
            /* ‰øÆÊ≠£ÔºöÁßªÈô§ÈáçÊª§ÈïúÔºåÂè™‰øùÁïôËΩªÂæÆÁöÑÂØπÊØîÂ∫¶Â¢ûÂº∫ÔºåËÆ©Âú∞ÂõæÊ∏ÖÊô∞ÂèØËßÅ */
            filter: contrast(1.1) brightness(1.1) saturate(1.1);
            background: #0b1d2e; /* ÂåπÈÖçÁì¶ÁâáÂ∫ïËâ≤ÔºåÈò≤Ê≠¢ÊãñÊãΩÁôΩËæπ */
        }

        /* --- 4. PANEL BASE STYLES --- */
        .panel-base {
            position: absolute; background: var(--panel); 
            border: 1px solid rgba(0, 229, 255, 0.3); border-radius: 6px;
            backdrop-filter: blur(8px); z-index: 10;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        .header-base {
            padding: 12px 15px; background: rgba(0, 229, 255, 0.05);
            border-bottom: 1px solid rgba(0, 229, 255, 0.2);
            border-radius: 6px 6px 0 0;
            display: flex; justify-content: space-between; align-items: center;
        }
        .title-base { font-weight: 800; font-size: 12px; letter-spacing: 1px; color: var(--accent); }
        .section-title { font-size: 10px; color: var(--accent); opacity: 0.8; margin-bottom: 10px; letter-spacing: 1px; font-weight: 700; padding-left: 5px; border-left: 2px solid var(--accent); }

        /* --- 5. LEFT SIDEBAR (No Zodiacs) --- */
        .sidebar { top: 20px; left: 20px; width: 260px; }
        .layer-list { padding: 15px; }
        .layer-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .layer-name { font-size: 13px; font-weight: 500; color: var(--text); }
        .layer-src { font-size: 10px; color: var(--text-mute); display: block; margin-top: 2px;}
        
        .toggle { appearance: none; width: 32px; height: 16px; background: #233044; border-radius: 8px; position: relative; transition: 0.3s; cursor: pointer; }
        .toggle::after { content: ''; position: absolute; top: 2px; left: 2px; width: 12px; height: 12px; background: #6b8caf; border-radius: 50%; transition: 0.3s; }
        .toggle:checked { background: rgba(0, 229, 255, 0.2); border: 1px solid var(--accent); }
        .toggle:checked::after { transform: translateX(16px); background: var(--accent); box-shadow: 0 0 8px var(--accent); }

        .sidebar-footer { padding: 15px; border-top: 1px solid rgba(0, 229, 255, 0.2); font-size: 9px; color: var(--text-mute); line-height: 1.4; font-family: var(--font-mono); }

        /* --- 6. RIGHT SIDEBAR (INTELLIGENCE DIRECTORY - NO JUMP) --- */
        .portal-sidebar { top: 20px; right: 20px; width: 240px; }
        .portal-list { padding: 10px; }
        .portal-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px; background: rgba(255, 255, 255, 0.03); margin-bottom: 6px;
            border-radius: 4px; border: 1px solid transparent; transition: 0.2s;
        }
        .portal-item:hover { border-color: var(--accent); background: rgba(0, 229, 255, 0.1); transform: translateX(-3px); }
        .p-name { font-size: 12px; color: #fff; }
        .p-tag { font-size: 9px; color: var(--text-mute); display: block; }
        .p-icon { font-size: 10px; color: var(--accent); opacity: 0.5; }

        /* --- 7. INTEL POPUP (Êõø‰ª£Ë∑≥ËΩ¨ÁöÑÂºπÁ™ó) --- */
        #intelModal {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9);
            width: 400px; background: #0b1219;
            border: 1px solid var(--accent); border-radius: 8px;
            box-shadow: 0 0 50px rgba(0,0,0,0.8), 0 0 10px var(--accent-glow);
            z-index: 2000; display: none; opacity: 0;
            transition: 0.2s; font-family: var(--font-mono);
        }
        #intelModal.active { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        
        .intel-header { padding: 15px; background: rgba(0, 229, 255, 0.1); display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--accent); }
        .intel-title { color: var(--accent); font-weight: bold; font-size: 14px; letter-spacing: 1px; }
        .intel-body { padding: 20px; color: var(--text); font-size: 12px; line-height: 1.6; }
        .intel-row { display: flex; justify-content: space-between; margin-bottom: 8px; border-bottom: 1px dashed #333; padding-bottom: 4px; }
        .intel-label { color: var(--text-mute); }
        .intel-val { color: #fff; font-weight: bold; }
        .intel-desc { margin-top: 15px; color: var(--text-mute); font-style: italic; font-size: 11px; }

        /* --- 8. AI & NEWBIE (UI TWEAKS) --- */
        .ai-avatar-btn {
            position: absolute; bottom: 20px; right: 20px;
            width: 50px; height: 50px; background: var(--panel);
            border: 1px solid var(--accent); border-radius: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.5); z-index: 1000;
            display: flex; justify-content: center; align-items: center;
        }
        .bot-face { width: 26px; height: 18px; background: #000; border-radius: 2px; position: relative; border: 2px solid var(--accent); }
        .bot-eye { position: absolute; top: 4px; width: 4px; height: 4px; background: var(--accent); animation: blink 4s infinite; }
        .eye-l { left: 4px; } .eye-r { right: 4px; }
        .bot-mouth { position: absolute; bottom: 3px; left: 6px; right: 6px; height: 1px; background: var(--accent); }
        @keyframes blink { 0%, 96%, 100% { height: 4px; } 98% { height: 1px; top: 4px; } }

        .chat-terminal {
            position: absolute; bottom: 85px; right: 20px;
            width: 350px; height: 450px; display: none; flex-direction: column;
        }
        .chat-body { flex: 1; padding: 15px; overflow-y: auto; font-size: 12px; }
        .msg-ai { padding: 8px 12px; background: rgba(0, 229, 255, 0.05); border-left: 2px solid var(--accent); margin-bottom: 10px; border-radius: 0 8px 8px 0; }
        .msg-user { padding: 8px 12px; background: rgba(255, 255, 255, 0.05); text-align: right; margin-bottom: 10px; border-radius: 8px 0 0 8px; }

        .input-area { padding: 10px; border-top: 1px solid rgba(255,255,255,0.1); }
        .input-field { width: 100%; background: transparent; border: none; color: #fff; outline: none; font-family: var(--font-mono); font-size: 12px; }

    </style>
</head>
<body>

    <div id="entryOverlay">
        <div class="entry-title">OPEN RS HUB</div>
        <div class="entry-sub">SATELLITE COMMAND INTERFACE // V5.0</div>
        
        <div class="legal-box">
            [ COMPLIANCE NOTICE ]<br>
            // Operating under Open Source Intelligence (OSINT) protocols.<br>
            // No personal geolocation data stored. (GDPR Compliant)<br>
            // Imagery references belong to ESA, NASA, USGS.
        </div>

        <div style="font-size:10px; margin-bottom:10px; color:var(--accent); font-family:var(--font-mono);">[ SELECT OPERATOR ID ]</div>
        
        <div class="cursor-selection-grid">
            <div class="entry-card" onclick="startGame('aries')"><div class="entry-icon">üêè</div><div class="entry-label">Aries</div></div>
            <div class="entry-card" onclick="startGame('taurus')"><div class="entry-icon">üêÇ</div><div class="entry-label">Taurus</div></div>
            <div class="entry-card" onclick="startGame('gemini')"><div class="entry-icon">üëØ</div><div class="entry-label">Gemini</div></div>
            <div class="entry-card" onclick="startGame('cancer')"><div class="entry-icon">ü¶Ä</div><div class="entry-label">Cancer</div></div>
            <div class="entry-card" onclick="startGame('leo')"><div class="entry-icon">ü¶Å</div><div class="entry-label">Leo</div></div>
            <div class="entry-card" onclick="startGame('virgo')"><div class="entry-icon">üßö</div><div class="entry-label">Virgo</div></div>
            <div class="entry-card" onclick="startGame('libra')"><div class="entry-icon">‚öñÔ∏è</div><div class="entry-label">Libra</div></div>
            <div class="entry-card" onclick="startGame('scorpio')"><div class="entry-icon">ü¶Ç</div><div class="entry-label">Scorpio</div></div>
            <div class="entry-card" onclick="startGame('sagittarius')"><div class="entry-icon">üèπ</div><div class="entry-label">Sagittarius</div></div>
            <div class="entry-card" onclick="startGame('capricorn')"><div class="entry-icon">üêê</div><div class="entry-label">Capricorn</div></div>
            <div class="entry-card" onclick="startGame('aquarius')"><div class="entry-icon">üè∫</div><div class="entry-label">Aquarius</div></div>
            <div class="entry-card" onclick="startGame('pisces')"><div class="entry-icon">üêü</div><div class="entry-label">Pisces</div></div>
        </div>
    </div>

    <div id="map"></div>

    <aside class="sidebar panel-base">
        <div class="header-base">
            <div class="title-base">OPEN RS HUB</div>
        </div>
        
        <div class="layer-list">
            <div class="section-title">OPTICAL FEEDS</div>
            <div class="layer-row">
                <div><div class="layer-name">Sentinel-2 (ESA)</div><span class="layer-src">10m Multispectral</span></div>
                <input type="checkbox" class="toggle" checked>
            </div>
            <div class="layer-row">
                <div><div class="layer-name">Landsat 8/9 (USGS)</div><span class="layer-src">30m OLI/TIRS</span></div>
                <input type="checkbox" class="toggle">
            </div>
            
            <div class="section-title" style="margin-top:20px;">ENVIRONMENTAL</div>
            <div class="layer-row">
                <div><div class="layer-name">VIIRS Night Lights</div><span class="layer-src">Suomi NPP</span></div>
                <input type="checkbox" class="toggle">
            </div>
            <div class="layer-row">
                <div><div class="layer-name">Active Fires</div><span class="layer-src">FIRMS / MODIS</span></div>
                <input type="checkbox" class="toggle">
            </div>
        </div>

        <div class="sidebar-footer">
            [ SYSTEM ATTRIBUTION ]<br>
            Contains modified Copernicus Sentinel data [2025].<br>
            USGS/NASA Landsat Program data.
        </div>
    </aside>

    <div class="portal-sidebar panel-base">
        <div class="header-base">
            <div class="title-base">DIRECTORY // INTEL</div>
        </div>
        <div class="portal-list">
            <div class="section-title">COMMERCIAL OPTICAL</div>
            <div class="portal-item" onclick="showIntel('maxar')">
                <div><div class="p-name">MAXAR</div><span class="p-tag">WorldView Legion (0.3m)</span></div><div class="p-icon">DETAILS</div>
            </div>
            <div class="portal-item" onclick="showIntel('planet')">
                <div><div class="p-name">Planet</div><span class="p-tag">SuperDove (3m Daily)</span></div><div class="p-icon">DETAILS</div>
            </div>
            <div class="portal-item" onclick="showIntel('airbus')">
                <div><div class="p-name">Airbus</div><span class="p-tag">Pleiades Neo (0.3m)</span></div><div class="p-icon">DETAILS</div>
            </div>

            <div class="section-title" style="margin-top:10px;">SAR & SPECIALTY</div>
            <div class="portal-item" onclick="showIntel('capella')">
                <div><div class="p-name">Capella Space</div><span class="p-tag">X-Band SAR</span></div><div class="p-icon">DETAILS</div>
            </div>
            <div class="portal-item" onclick="showIntel('iceye')">
                <div><div class="p-name">ICEYE</div><span class="p-tag">Persistent Monitoring</span></div><div class="p-icon">DETAILS</div>
            </div>
        </div>
    </div>

    <div id="intelModal" class="panel-base">
        <div class="intel-header">
            <div class="intel-title" id="modalTitle">TARGET ID</div>
            <div style="cursor:pointer;" onclick="closeIntel()">[x]</div>
        </div>
        <div class="intel-body" id="modalBody"></div>
    </div>

    <div class="ai-avatar-btn" onclick="toggleChat()"><div class="bot-face"><div class="bot-eye eye-l"></div><div class="bot-eye eye-r"></div><div class="bot-mouth"></div></div></div>
    
    <div class="chat-terminal panel-base" id="terminal">
        <div class="header-base">
            <span class="title-base">CO-PILOT // LOG</span>
        </div>
        <div class="chat-body" id="chatBody"></div>
        <div class="input-area">
            <input type="text" class="input-field" id="userInput" placeholder="Command..." onkeypress="handleKey(event)">
        </div>
    </div>

    <script>
        // --- 1. MAP SETUP (Brightened) ---
        const map = L.map('map', {
            zoomControl: false,
            minZoom: 3, 
            maxBounds: [[-90, -180], [90, 180]],
            attributionControl: false
        }).setView([20, 0], 3);

        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            subdomains: 'abcd',
            maxZoom: 19
        }).addTo(map);

        // --- 2. CURSOR LOGIC ---
        const cursorSVG = (emoji) => `url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='36' height='36' style='font-size:24px; filter:drop-shadow(0 0 3px cyan);'><text x='50%' y='60%' dominant-baseline='middle' text-anchor='middle'>${emoji}</text></svg>") 18 18, auto`;
        
        const cursors = {
            'aries':    cursorSVG('üêè'), 'taurus':   cursorSVG('üêÇ'),
            'gemini':   cursorSVG('üëØ'), 'cancer':   cursorSVG('ü¶Ä'),
            'leo':      cursorSVG('ü¶Å'), 'virgo':    cursorSVG('üßö'),
            'libra':    cursorSVG('‚öñÔ∏è'), 'scorpio':  cursorSVG('ü¶Ç'),
            'sagittarius':cursorSVG('üèπ'),'capricorn':cursorSVG('üêê'),
            'aquarius': cursorSVG('üè∫'), 'pisces':   cursorSVG('üêü')
        };

        function startGame(choice) {
            document.documentElement.style.setProperty('--cursor-default', cursors[choice]);
            document.documentElement.style.setProperty('--cursor-pointer', cursors[choice]);
            
            const overlay = document.getElementById('entryOverlay');
            overlay.style.opacity = '0';
            setTimeout(() => { overlay.style.display = 'none'; }, 600);
            
            addMsg(`[SYSTEM] Interface initialized. Operator sign: ${choice.toUpperCase()}.`);
        }

        // --- 3. INTEL DATA (The "No Jump" Solution) ---
        const intelDB = {
            'maxar': {
                title: 'MAXAR TECHNOLOGIES',
                data: { 'Constellation': 'WorldView Legion', 'Res': '30cm (Native)', 'Revisit': 'Up to 15x/day', 'Band': '8-Band Multispectral' },
                desc: 'Primary provider for high-resolution defense and intelligence imagery. Features industry-leading accuracy.'
            },
            'planet': {
                title: 'PLANET LABS',
                data: { 'Constellation': 'SuperDove / SkySat', 'Res': '3m (Dove) / 50cm (SkySat)', 'Revisit': 'Daily (Global)', 'Archive': 'Daily since 2017' },
                desc: 'Operates the largest earth observation fleet. "Scanner" philosophy: Image the whole world, every day.'
            },
            'airbus': {
                title: 'AIRBUS INTELLIGENCE',
                data: { 'Constellation': 'Pl√©iades Neo', 'Res': '30cm', 'Swath': '14km', 'Tasking': 'Reactive (Intraday)' },
                desc: 'European leader in high-res optical. Offers specialized "OneAtlas" living library access.'
            },
            'capella': {
                title: 'CAPELLA SPACE',
                data: { 'Sensor': 'Synthetic Aperture Radar', 'Band': 'X-Band', 'Res': 'Sub-50cm', 'Capability': 'All-weather / Night' },
                desc: 'US-based SAR provider. High-resolution radar imagery capable of penetrating clouds and smoke.'
            },
            'iceye': {
                title: 'ICEYE',
                data: { 'Sensor': 'SAR Microsats', 'Res': 'Spotlight mode', 'Revisit': 'High frequency', 'Orbit': 'Inclined & Sun-sync' },
                desc: 'Finnish microsatellite manufacturer. Focuses on persistent monitoring and rapid revisit SAR.'
            }
        };

        function showIntel(key) {
            const info = intelDB[key];
            if(!info) return;

            document.getElementById('modalTitle').innerText = info.title;
            let html = '';
            for (const [k, v] of Object.entries(info.data)) {
                html += `<div class="intel-row"><span class="intel-label">${k}</span><span class="intel-val">${v}</span></div>`;
            }
            html += `<div class="intel-desc">${info.desc}</div>`;
            document.getElementById('modalBody').innerHTML = html;
            
            document.getElementById('intelModal').style.display = 'block';
            setTimeout(() => document.getElementById('intelModal').classList.add('active'), 10);
            
            addMsg(`[QUERY] Retrieved tech specs for: ${info.title}.`);
        }

        function closeIntel() {
            document.getElementById('intelModal').classList.remove('active');
            setTimeout(() => document.getElementById('intelModal').style.display = 'none', 200);
        }

        // --- 4. CHAT LOGIC ---
        const chatBody = document.getElementById('chatBody');
        const input = document.getElementById('userInput');

        function handleKey(e) { if(e.key === 'Enter') sendMsg(); }

        function sendMsg() {
            const txt = input.value.trim();
            if(!txt) return;
            addMsg(txt, 'user');
            input.value = "";
            setTimeout(() => reply(txt), 600);
        }

        function reply(txt) {
            const t = txt.toLowerCase();
            let resp = "Command not recognized. Try 'status', 'scan', or 'visuals'.";
            if(t.includes('hello')) resp = "Systems online. Ready for tasking.";
            if(t.includes('status')) resp = "All constellations nominal. Data links secure.";
            addMsg(resp);
        }

        function addMsg(text, type='ai') {
            const div = document.createElement('div');
            div.className = type === 'ai' ? 'msg-ai' : 'msg-user';
            div.innerText = text;
            chatBody.appendChild(div);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        let isChatOpen = false;
        function toggleChat() {
            const t = document.getElementById('terminal');
            isChatOpen = !isChatOpen;
            t.style.display = isChatOpen ? 'flex' : 'none';
        }
    </script>
</body>
</html>