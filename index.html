<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>Satellite Discovery Index — Open / No Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Leaflet (2D, stable, no WebGL required) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- satellite.js (open-source SGP4 propagation; planning reference only) -->
  <script src="https://cdn.jsdelivr.net/npm/satellite.js@5.0.1/dist/satellite.min.js"></script>

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
<header class="topbar">
  <div class="brand">
    <div class="logo"></div>
    <div>
      <div class="title">Satellite Discovery Index</div>
      <div class="subtitle">Open data only · No login · Archive coverage + pass planning (reference only)</div>
    </div>
  </div>
  <div class="nav">
    <a class="navlink" href="#aoi">AOI</a>
    <a class="navlink" href="#coverage">Coverage</a>
    <a class="navlink" href="#footprints">Footprints</a>
    <a class="navlink" href="#programming">Programming</a>
    <a class="navlink" href="#sources">Sources</a>
  </div>
</header>

<main class="layout">
  <section class="panel">

    <div class="card" id="aoi">
      <h2>1) AOI 设置</h2>

      <div class="row">
        <div class="field">
          <label>地点搜索（可选）</label>
          <div class="inline">
            <input id="placeInput" type="text" placeholder="Beijing / Dubai / New York" />
            <button id="placeBtn" class="btn">定位</button>
          </div>
          <div class="hint">使用 OpenStreetMap Nominatim 公共地理编码（不登录）。</div>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>上传 AOI（GeoJSON）</label>
          <input id="fileInput" type="file" accept=".geojson,.json" />
          <div class="hint">建议上传 polygon/ multipolygon。也可上传 bbox 矩形的 GeoJSON。</div>
        </div>
      </div>

      <div class="row">
        <div class="inline">
          <button id="drawRectBtn" class="btn btn-secondary">拖拽绘制矩形 AOI</button>
          <button id="clearAoiBtn" class="btn btn-ghost">清除 AOI</button>
        </div>
      </div>

      <div class="aoiBox">
        <div class="aoiTitle">当前 AOI</div>
        <div id="aoiSummary" class="aoiSummary">None</div>
      </div>
    </div>

    <div class="card" id="coverage">
      <h2>2) Archive Coverage Index（覆盖指示 · 参考）</h2>

      <div class="row">
        <div class="field">
          <label>时间范围（用于公开 STAC 信号检查）</label>
          <div class="inline">
            <input id="startMonth" type="month" />
            <input id="endMonth" type="month" />
          </div>
          <div class="hint">这里是“公开信号/规则指示”，不是可得性承诺，不涉及采购/下单。</div>
        </div>
      </div>

      <div class="row">
        <div class="inline">
          <button id="coverageIndexBtn" class="btn btn-primary">运行覆盖指示</button>
          <button id="clearIndexBtn" class="btn btn-ghost">清空</button>
        </div>
      </div>

      <div class="row">
        <div id="indexStatus" class="hint"></div>
      </div>

      <div class="row">
        <div id="coverageIndex" class="indexList"></div>
      </div>

      <div class="row">
        <div class="hint">
          Legend:
          <span class="pill ok">✅ likely</span>
          <span class="pill warn">⚠️ partial / non-uniform / samples</span>
          <span class="pill no">❌ no public signal</span>
        </div>
      </div>
    </div>

    <div class="card" id="footprints">
      <h2>3) Open STAC Footprints（公开数据可加载）</h2>

      <div class="row">
        <div class="inline">
          <button id="footprintsBtn" class="btn btn-primary">加载公开足迹</button>
          <button id="clearFootprintsBtn" class="btn btn-ghost">清除足迹</button>
        </div>
      </div>

      <div class="row">
        <div id="footprintsStatus" class="hint"></div>
      </div>

      <div class="row">
        <div id="footprintsSummary" class="sources"></div>
      </div>

      <div class="row">
        <div class="hint">
          仅加载公开 STAC（Planetary Computer）足迹：Sentinel-2 / Sentinel-1 / Landsat（参考可视化）。
        </div>
      </div>
    </div>

    <div class="card" id="programming">
      <h2>4) Programming Index（未来过境 · 参考）</h2>

      <div class="row">
        <div class="field">
          <label>预测窗口（天）</label>
          <div class="inline">
            <select id="progDays" class="select">
              <option value="7">7</option>
              <option value="14" selected>14</option>
              <option value="30">30</option>
            </select>
            <button id="progBtn" class="btn btn-primary">估算过境</button>
            <button id="progClearBtn" class="btn btn-ghost">清空</button>
          </div>
          <div class="hint">使用公开 TLE + SGP4（satellite.js），用简化扫幅模型做“规划参考”。</div>
        </div>
      </div>

      <div class="row">
        <div id="progStatus" class="hint"></div>
      </div>

      <div class="row">
        <div id="progResult" class="indexList"></div>
      </div>
    </div>

    <div class="card" id="sources">
      <h2>5) Sources（公开平台 · 透明列示）</h2>
      <div class="hint">仅用于来源透明与能力说明。本工具不要求登录，不进行采购/下单。</div>
      <div id="sourcesList" class="sources"></div>
    </div>

    <footer class="footer">
      <div class="footerLine">
        <b>Notice:</b> Open data only. This site provides <b>reference-level</b> indicators (coverage & planning).
        It does <b>not</b> replace official portals or procurement workflows.
      </div>
    </footer>

  </section>

  <section class="mapWrap">
    <div class="mapChrome">
      <div class="hudTag left">OPEN · NO LOGIN</div>
      <div class="hudTag right">REFERENCE ONLY</div>
    </div>
    <div id="map"></div>
  </section>
</main>

<script src="app.js"></script>
</body>
</html>
