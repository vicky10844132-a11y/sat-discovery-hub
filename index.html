<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OPEN RS HUB // Aerospace Interface</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        /* --- 1. THEME: AEROSPACE GLASS (Clean, Modern, Tech) --- */
        :root {
            /* Backgrounds: Slate Blue / Grey tones instead of pure black */
            --bg-app: #0f172a;        /* 深岩板蓝 */
            --bg-panel: rgba(15, 23, 42, 0.85); /* 半透明磨砂 */
            --bg-header: rgba(15, 23, 42, 0.95);
            
            /* Accents */
            --primary: #38bdf8;       /* 天空蓝 (Sky Blue) - 亮眼但不刺眼 */
            --primary-dim: rgba(56, 189, 248, 0.15);
            --border: rgba(148, 163, 184, 0.2); /* 淡淡的灰蓝边框 */
            
            /* Text */
            --text-main: #f1f5f9;     /* 亮白 */
            --text-sub: #94a3b8;      /* 灰蓝字 */
            
            /* Metrics */
            --sidebar-w: 320px;
            --header-h: 56px;
            --radius: 8px;
            --font-ui: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        * { box-sizing: border-box; }
        body { margin: 0; padding: 0; font-family: var(--font-ui); background: var(--bg-app); color: var(--text-main); overflow: hidden; height: 100vh; width: 100vw; }

        /* --- 2. LAYOUT --- */
        #app { display: flex; flex-direction: column; height: 100%; }

        /* Header */
        header {
            height: var(--header-h); background: var(--bg-header); 
            border-bottom: 1px solid var(--border);
            display: flex; align-items: center; justify-content: space-between; padding: 0 24px;
            z-index: 20; backdrop-filter: blur(12px);
        }
        .logo { 
            font-size: 16px; font-weight: 700; letter-spacing: 0.5px; color: #fff; 
            display: flex; align-items: center; gap: 12px; 
        }
        .logo-icon {
            width: 32px; height: 32px; background: linear-gradient(135deg, #0ea5e9, #2563eb);
            border-radius: 6px; display: flex; align-items: center; justify-content: center;
            color: #fff; font-size: 18px; box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
        }
        .nav-pill {
            background: rgba(255,255,255,0.05); padding: 6px 12px; border-radius: 20px;
            font-size: 11px; color: var(--text-sub); border: 1px solid transparent; transition: 0.2s;
            cursor: pointer; font-weight: 500;
        }
        .nav-pill.active { background: var(--primary-dim); color: var(--primary); border-color: rgba(56, 189, 248, 0.3); }

        /* Workspace */
        #workspace { flex: 1; display: flex; position: relative; overflow: hidden; }

        /* --- 3. MAP (CRYSTAL CLEAR) --- */
        #map { flex: 1; height: 100%; background: #0f172a; z-index: 1; }
        
        /* Map Controls (Bottom Left) */
        .map-controls {
            position: absolute; bottom: 24px; left: 24px; z-index: 400;
            display: flex; gap: 8px; padding: 6px; background: var(--bg-panel);
            border: 1px solid var(--border); border-radius: 8px; backdrop-filter: blur(8px);
        }
        .map-btn {
            background: transparent; border: none; color: var(--text-sub);
            padding: 6px 12px; font-size: 11px; cursor: pointer; border-radius: 4px; font-weight: 600;
            transition: 0.2s;
        }
        .map-btn.active { background: #334155; color: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }

        /* --- 4. SIDEBARS (GLASSMORPHISM) --- */
        .sidebar {
            width: var(--sidebar-w); background: var(--bg-panel);
            border-right: 1px solid var(--border); display: flex; flex-direction: column;
            z-index: 500; transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(16px); /* 核心：磨砂玻璃感 */
            position: relative;
        }
        .sidebar.right { border-right: none; border-left: 1px solid var(--border); }
        
        .sidebar.collapsed { transform: translateX(-100%); position: absolute; height: 100%; }
        .sidebar.right.collapsed { transform: translateX(100%); }

        /* Toggle Button (Floating) */
        .toggle-btn {
            position: absolute; top: 50%; width: 24px; height: 24px;
            background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            color: #0f172a; box-shadow: 0 2px 8px rgba(0,0,0,0.2); cursor: pointer; z-index: 501;
            transition: 0.2s; transform: translateY(-50%); font-size: 14px;
        }
        .toggle-btn:hover { transform: translateY(-50%) scale(1.1); }
        .sb-left .toggle-btn { right: -12px; }
        .sb-right .toggle-btn { left: -12px; }

        /* Sidebar Content */
        .sb-content { flex: 1; overflow-y: auto; padding: 20px; }
        
        /* --- 5. MODULES (CLEAN CARDS) --- */
        .module { margin-bottom: 24px; }
        .mod-header {
            display: flex; align-items: center; gap: 8px; margin-bottom: 12px;
            color: var(--primary); font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
        }
        .mod-header i { font-size: 14px; }

        /* Input Fields (Modern) */
        .input-box {
            background: rgba(30, 41, 59, 0.6); border: 1px solid var(--border);
            border-radius: var(--radius); padding: 4px; display: flex; gap: 4px;
            transition: 0.2s;
        }
        .input-box:focus-within { border-color: var(--primary); box-shadow: 0 0 0 2px var(--primary-dim); background: rgba(30, 41, 59, 0.9); }
        
        .clean-input {
            flex: 1; background: transparent; border: none; color: #fff;
            padding: 8px; font-size: 13px; outline: none; font-family: var(--font-ui);
        }
        .action-btn {
            background: var(--primary); color: #0f172a; border: none;
            padding: 0 16px; border-radius: 4px; font-weight: 600; font-size: 11px;
            cursor: pointer; transition: 0.2s;
        }
        .action-btn:hover { background: #7dd3fc; }

        /* Date Inputs */
        .date-row { display: flex; gap: 10px; margin-top: 8px; }
        .date-input {
            flex: 1; background: rgba(30, 41, 59, 0.6); border: 1px solid var(--border);
            color: var(--text-main); padding: 8px; border-radius: var(--radius); font-size: 12px; outline: none;
        }

        /* Range Slider */
        input[type=range] {
            width: 100%; height: 4px; background: #334155; border-radius: 2px;
            accent-color: var(--primary); margin-top: 10px;
        }

        /* Checkboxes */
        .check-group { margin-top: 10px; display: flex; flex-direction: column; gap: 8px; }
        .check-label { display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-main); cursor: pointer; }
        .check-label input { accent-color: var(--primary); }

        /* --- 6. CAPABILITY CARDS (RIGHT SIDE) --- */
        .cap-card {
            background: rgba(30, 41, 59, 0.4); border: 1px solid var(--border);
            border-radius: var(--radius); padding: 12px; margin-bottom: 8px;
            transition: 0.2s; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
        }
        .cap-card:hover { 
            background: rgba(56, 189, 248, 0.05); border-color: var(--primary); 
            transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .cap-main h4 { margin: 0 0 2px 0; font-size: 13px; font-weight: 600; color: #fff; }
        .cap-main p { margin: 0; font-size: 11px; color: var(--text-sub); }
        .cap-tag {
            font-size: 9px; padding: 3px 8px; border-radius: 12px; font-weight: 600; text-transform: uppercase;
        }
        /* Tag Colors */
        .tag-agg { background: #3b0764; color: #d8b4fe; border: 1px solid #7e22ce; } /* Purple */
        .tag-gov { background: #064e3b; color: #6ee7b7; border: 1px solid #059669; } /* Green */
        .tag-com { background: #172554; color: #93c5fd; border: 1px solid #2563eb; } /* Blue */

        /* --- 7. MODAL (CLEAN & SHARP) --- */
        #infoModal {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 420px; background: #1e293b; border-radius: 12px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5); z-index: 2000;
            display: none; border: 1px solid #334155; overflow: hidden;
        }
        .modal-header {
            background: #0f172a; padding: 16px 20px; border-bottom: 1px solid #334155;
            display: flex; justify-content: space-between; align-items: center;
        }
        .modal-title { font-weight: 700; color: #fff; font-size: 14px; letter-spacing: 0.5px; }
        
        .modal-body { padding: 24px; }
        .spec-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .spec-table td { padding: 8px 0; border-bottom: 1px solid #334155; }
        .spec-label { color: #94a3b8; }
        .spec-value { text-align: right; color: #f1f5f9; font-weight: 500; }
        
        .modal-footer {
            padding: 16px; background: #0f172a; border-top: 1px solid #334155; text-align: center;
        }
        .primary-link {
            display: inline-block; text-decoration: none; color: #38bdf8; font-size: 12px; font-weight: 600;
            border-bottom: 1px solid transparent; transition: 0.2s;
        }
        .primary-link:hover { border-bottom-color: #38bdf8; }

        /* Footer */
        .disclaimer {
            position: absolute; bottom: 8px; right: 12px; z-index: 400;
            font-size: 10px; color: rgba(255,255,255,0.4);
        }

    </style>
</head>
<body>

<div id="app">
    <header>
        <div class="logo">
            <div class="logo-icon"><i class="ph ph-planet"></i></div>
            OPEN RS HUB
        </div>
        <div class="top-nav">
            <div class="nav-pill active">Mission Planner</div>
            <div class="nav-pill">Coverage Map</div>
            <div class="nav-pill">Data Sources</div>
        </div>
    </header>

    <div id="workspace">
        
        <div class="sidebar sb-left" id="sbLeft">
            <div class="toggle-btn" onclick="toggleSidebar('left')"><i class="ph ph-caret-left"></i></div>
            
            <div class="sb-content">
                
                <div class="module">
                    <div class="mod-header"><i class="ph ph-crosshair"></i> 1. Target Area (AOI)</div>
                    <div class="input-box">
                        <input type="text" id="aoiInput" class="clean-input" placeholder="City, Lat/Lon..." onkeypress="handleKey(event)">
                        <button class="action-btn" onclick="executeLocate()">LOCATE</button>
                    </div>
                    <div style="font-size:11px; color:#648db5; margin-top:8px;">
                        <i class="ph ph-info"></i> Supports global geocoding via OSM.
                    </div>
                </div>

                <div class="module">
                    <div class="mod-header"><i class="ph ph-calendar"></i> 2. Acquisition Window</div>
                    <div class="date-row">
                        <input type="date" class="date-input" value="2023-01-01">
                        <input type="date" class="date-input" value="2026-01-01">
                    </div>
                </div>

                <div class="module">
                    <div class="mod-header"><i class="ph ph-sliders"></i> 3. Sensor Requirements</div>
                    
                    <div style="margin-bottom:15px;">
                        <div style="display:flex; justify-content:space-between; font-size:12px; color:#f1f5f9; margin-bottom:5px;">
                            <span>Cloud Cover</span>
                            <span id="cloudVal">15%</span>
                        </div>
                        <input type="range" min="0" max="100" value="15" oninput="document.getElementById('cloudVal').innerText=this.value+'%'">
                    </div>

                    <div class="check-group">
                        <label class="check-label"><input type="checkbox" checked> Optical (Multispectral)</label>
                        <label class="check-label"><input type="checkbox"> SAR (Synthetic Aperture Radar)</label>
                        <label class="check-label"><input type="checkbox"> Thermal Infrared</label>
                    </div>
                </div>

            </div>
        </div>

        <div id="map"></div>
        
        <div class="map-controls">
            <button class="map-btn active" onclick="setBaseLayer('dark', this)">Dark Vector</button>
            <button class="map-btn" onclick="setBaseLayer('sat', this)">Satellite Imagery</button>
        </div>
        
        <div class="disclaimer">
            Open Source Intelligence (OSINT) Tool. Reference Use Only.
        </div>

        <div class="sidebar sb-right right" id="sbRight">
            <div class="toggle-btn" onclick="toggleSidebar('right')"><i class="ph ph-caret-right"></i></div>
            
            <div class="sb-content">
                <div style="font-size:11px; font-weight:700; color:#94a3b8; margin-bottom:16px; letter-spacing:1px;">AVAILABLE DATA SOURCES</div>

                <div class="cap-card" onclick="showIntel('apollo')">
                    <div class="cap-main">
                        <h4>Apollo Image Hunter</h4>
                        <p>Broadest Commercial Search</p>
                    </div>
                    <div class="cap-tag tag-agg">Aggregator</div>
                </div>

                <div class="cap-card" onclick="showIntel('stac')">
                    <div class="cap-main">
                        <h4>STAC Index</h4>
                        <p>Global Open Catalog</p>
                    </div>
                    <div class="cap-tag tag-agg">Standard</div>
                </div>

                <div style="height:1px; background:var(--border); margin:15px 0;"></div>

                <div class="cap-card" onclick="showIntel('usgs')">
                    <div class="cap-main">
                        <h4>USGS EarthExplorer</h4>
                        <p>Landsat / Declassified</p>
                    </div>
                    <div class="cap-tag tag-gov">Free</div>
                </div>

                <div class="cap-card" onclick="showIntel('copernicus')">
                    <div class="cap-main">
                        <h4>Copernicus Browser</h4>
                        <p>Sentinel Ecosystem</p>
                    </div>
                    <div class="cap-tag tag-gov">Free</div>
                </div>

                <div style="height:1px; background:var(--border); margin:15px 0;"></div>

                <div class="cap-card" onclick="showIntel('maxar')">
                    <div class="cap-main">
                        <h4>MAXAR</h4>
                        <p>WorldView Legion (0.3m)</p>
                    </div>
                    <div class="cap-tag tag-com">Optical</div>
                </div>

                <div class="cap-card" onclick="showIntel('planet')">
                    <div class="cap-main">
                        <h4>Planet Labs</h4>
                        <p>Daily Global Scan (3m)</p>
                    </div>
                    <div class="cap-tag tag-com">Daily</div>
                </div>
                
                <div class="cap-card" onclick="showIntel('capella')">
                    <div class="cap-main">
                        <h4>Capella Space</h4>
                        <p>X-Band SAR (Night)</p>
                    </div>
                    <div class="cap-tag tag-com">Radar</div>
                </div>

            </div>
        </div>

    </div>
</div>

<div id="infoModal">
    <div class="modal-header">
        <span class="modal-title" id="modalTitle">TITLE</span>
        <i class="ph ph-x" style="cursor:pointer; color:#94a3b8;" onclick="closeModal()"></i>
    </div>
    <div class="modal-body">
        <table class="spec-table" id="modalTable">
            </table>
        <div style="margin-top:20px; font-size:12px; color:#94a3b8; line-height:1.5;" id="modalDesc"></div>
    </div>
    <div class="modal-footer">
        <a href="#" target="_blank" class="primary-link" id="modalLink">Access Official Portal &rarr;</a>
    </div>
</div>

<script>
    // --- 1. MAP INIT ---
    const map = L.map('map', { zoomControl: false, attributionControl: false }).setView([20, 0], 3);
    
    // Layers: Standard Carto Dark (Clean) & ESRI Sat
    const layers = {
        'dark': L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { subdomains: 'abcd', maxZoom: 20 }),
        'sat': L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { maxZoom: 19 })
    };
    layers.dark.addTo(map);

    function setBaseLayer(type, btn) {
        map.eachLayer(l => map.removeLayer(l));
        layers[type].addTo(map);
        document.querySelectorAll('.map-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    // --- 2. SIDEBAR TOGGLE ---
    function toggleSidebar(side) {
        const el = document.getElementById(side === 'left' ? 'sbLeft' : 'sbRight');
        const icon = el.querySelector('.toggle-btn i');
        el.classList.toggle('collapsed');
        
        if(el.classList.contains('collapsed')) {
            icon.className = side === 'left' ? 'ph ph-caret-right' : 'ph ph-caret-left';
        } else {
            icon.className = side === 'left' ? 'ph ph-caret-left' : 'ph ph-caret-right';
        }
        setTimeout(() => map.invalidateSize(), 300);
    }

    // --- 3. SEARCH (AOI) ---
    function handleKey(e) { if(e.key === 'Enter') executeLocate(); }
    function executeLocate() {
        const val = document.getElementById('aoiInput').value;
        if(!val) return;
        
        // Visual Feedback
        const btn = document.querySelector('.action-btn');
        btn.innerText = 'Searching...';
        
        fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(val)}`)
            .then(r=>r.json()).then(data => {
                btn.innerText = 'LOCATE';
                if(data.length) {
                    const {lat, lon} = data[0];
                    map.setView([lat, lon], 12);
                    L.marker([lat, lon]).addTo(map).bindPopup(`<b>AOI LOCKED</b><br>${data[0].display_name}`).openPopup();
                } else { alert('Location not found'); }
            });
    }

    // --- 4. INTEL DATA ---
    const db = {
        'apollo': {
            title: 'APOLLO IMAGE HUNTER',
            url: 'https://imagehunter.apollomapping.com/',
            specs: { 'Type': 'Aggregator', 'Sources': 'Maxar, Airbus, Planet, 21AT', 'Min Res': '30cm', 'Archive': 'Global Comprehensive' },
            desc: 'The industry-standard search engine. Best starting point to see "who has what" for any AOI. Aggregates data from multiple major vendors into a single map interface.'
        },
        'stac': {
            title: 'STAC INDEX',
            url: 'https://stacindex.org/',
            specs: { 'Standard': 'STAC v1.0.0', 'Type': 'Catalog', 'API': 'RESTful JSON', 'Access': 'Open Source' },
            desc: 'Official catalog of SpatioTemporal Asset Catalogs. Connects to AWS open data buckets and provides a standardized way to query geospatial assets.'
        },
        'usgs': {
            title: 'USGS EARTH EXPLORER',
            url: 'https://earthexplorer.usgs.gov/',
            specs: { 'Data': 'Landsat 1-9', 'Cost': 'Free', 'License': 'Public Domain', 'Format': 'GeoTIFF' },
            desc: 'The definitive source for US government remote sensing data. Contains the longest continuous record of Earth observation from space (Landsat).'
        },
        'copernicus': {
            title: 'COPERNICUS BROWSER',
            url: 'https://dataspace.copernicus.eu/',
            specs: { 'Data': 'Sentinel-1/2/3/5P', 'Revisit': '5 Days (S2)', 'Cost': 'Free', 'Format': 'SAFE / Cloud Optimized' },
            desc: 'Access point for the European Union Earth Observation programme. Provides high-quality optical and radar data for free.'
        },
        'maxar': {
            title: 'MAXAR TECHNOLOGIES',
            url: 'https://discover.maxar.com/',
            specs: { 'Constellation': 'WorldView / Legion', 'Res': '30cm (Native)', 'Accuracy': '<3m CE90', 'Bands': '8-Band Multispectral' },
            desc: 'Highest resolution commercial optical imagery available. Used extensively for defense, mapping, and high-precision monitoring.'
        },
        'planet': {
            title: 'PLANET LABS',
            url: 'https://www.planet.com/explorer/',
            specs: { 'Constellation': 'SuperDove (Flock)', 'Res': '3m (Daily)', 'Archive': 'Daily since 2017', 'Coverage': 'Global Landmass' },
            desc: 'Always-on monitoring. Unlike other providers that point-and-shoot, Planet scans the entire landmass of Earth every single day.'
        },
        'capella': {
            title: 'CAPELLA SPACE',
            url: 'https://www.capellaspace.com/',
            specs: { 'Sensor': 'SAR (X-Band)', 'Res': 'Sub-50cm', 'Look': 'Left/Right', 'Latency': 'Low Latency' },
            desc: 'High-resolution radar capable of imaging at night and through clouds. Ideal for monitoring ports, military movements, and disaster response.'
        }
    };

    function showIntel(key) {
        const d = db[key];
        document.getElementById('modalTitle').innerText = d.title;
        document.getElementById('modalLink').href = d.url;
        document.getElementById('modalDesc').innerText = d.desc;
        
        let html = '';
        for(let k in d.specs) {
            html += `<tr><td class="spec-label">${k}</td><td class="spec-value">${d.specs[k]}</td></tr>`;
        }
        document.getElementById('modalTable').innerHTML = html;
        
        document.getElementById('infoModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('infoModal').style.display = 'none';
    }
</script>

</body>
</html>